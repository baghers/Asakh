<?php 
/*
tools/tools_allproducer_groups.php

??? ???? ?? ??? ???? ???? ???? ???????? ?? ???
*/

include('../includes/connect.php'); ?>
<?php include('../includes/check_user.php'); ?>
<?php include('../includes/elements.php'); ?>
<?php
    /*
    producers ???? ???????????
    ProducersID ????? ????????????
    Title ????? ??????????
    */
    $query='select ProducersID as _value,Title as _key from producers order by Title COLLATE utf8_persian_ci';
    $allProducersID = get_key_value_from_query_into_array($query);
    $boxstr="";
    foreach ($allProducersID as $key1 => $value1)
    {                
        if ($key1!="--" && $key1!=" ")
        {
            /*
           gadget1 ???? ??? ??? ?????
           gadget1id ????? ???? ??? ??? ?????
           gadget2 ???? ??? ??? ?????
           gadget2id ????? ???? ??? ??? ?????
           gadget3 ???? ??? ??? ?????
           gadget3id ????? ???? ??? ??? ?????
           toolsmarks ???? ????? ???? ?? ????? ???? ??? ??????? ??? ?? ????
                ????? ? ???? ?? ????? ????? ???? ????? ?????????? ? ????? ???? ????? ?? ???
                gadget3ID ????? ??? 3 ?????
                ProducersID ????? ???? ??????????
                MarksID ????? ???? ????
           toolsmarksid ????? ????? ? ????
           */  
       
            $query = "select '0' As _value, ' ' As _key Union All  
                select distinct gadget2.gadget2ID as _value,CONCAT(CONCAT(gadget1.Title,'-'),gadget2.Title)  as _key from gadget1 
                inner join gadget2 on gadget2.gadget1ID=gadget1.gadget1ID
                inner join gadget3 on gadget3.gadget2ID=gadget2.gadget2ID
                inner join toolsmarks on gadget3.gadget3ID=toolsmarks.gadget3ID and toolsmarks.producersID='$value1'
                order by _key  COLLATE utf8_persian_ci";
                               
                               
            $allProducersID = get_key_value_from_query_into_array($query);
            
            $boxstr=$boxstr."<td class='data'><input style = \"border:1px solid black;font-weight: bold;font-size:16.0pt;font-family:'Arial';\" type='text' value='$key1'></input></td>
            <table style='border:2px solid;'><tr>";
            foreach ($allProducersID as $key => $value)
            {
                if ($value>0)
                {
                    $cnt++;
                    $boxstr=$boxstr. "
                    <td class='data'><input style = \"border:1px solid black;font-weight: bold;font-size:16.0pt;font-family:'Arial';\" type='text' value='$key'></input></td>";
                    if (($cnt%5)==0)
                        $boxstr=$boxstr. "</tr><tr>";
                }
            }         
                   
            $boxstr=$boxstr. "</tr></table>";
        }
    }                 
                     
    print $boxstr;
   
   
   
			
			
		
	

?>



